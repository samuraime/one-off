(this.webpackJsonpclient=this.webpackJsonpclient||[]).push([[0],{31:function(e,t,n){e.exports={form:"KGe_form__2BZIL",row:"KGe_row__1HZPb"}},49:function(e,t,n){e.exports=n(65)},54:function(e,t,n){},60:function(e,t,n){},65:function(e,t,n){"use strict";n.r(t);var a=n(0),r=n.n(a),c=n(8),o=n.n(c),i=(n(54),n(44)),l=n(20),u=n(15),s=n(91),f=n(95),m=n(96),p=n(31),h=n.n(p);var v=function(){var e=Object(a.useState)(""),t=Object(u.a)(e,2),n=t[0],c=t[1],o=Object(a.useState)([]),i=Object(u.a)(o,2),l=i[0],p=i[1],v=Object(a.useState)(!1),d=Object(u.a)(v,2),g=d[0],E=d[1];return r.a.createElement("form",{className:h.a.form,noValidate:!0,autoComplete:"off",onSubmit:function(e){e.preventDefault(),E(!0),fetch("".concat("https://one-off.samuraime.com","/kg"),{method:"POST",headers:{"content-type":"application/json"},body:JSON.stringify({mids:l})}).then((function(e){return e.json()})).then((function(e){var t,n=(t=e).length?Object.keys(t[0]).join(",")+"\n"+t.map((function(e){return Object.entries(e).map((function(e){return e[1]})).join(",")})).join("\n"):"";!function(e,t){var n=document.createElement("a"),a=URL.createObjectURL(t);n.href=a,n.download=e,n.click(),URL.revokeObjectURL(a)}("kg.csv",new Blob([n],{type:"text/plain"}))})).catch((function(e){alert(e.message)})).finally((function(){E(!1)}))}},r.a.createElement(s.a,{variant:"h5"},"Get K\u6b4c Rank Detail"),r.a.createElement(f.a,{className:h.a.row,label:"URLs",multiline:!0,fullWidth:!0,value:n,onChange:function(e){var t=e.target.value.split("\n").map((function(e){var t=e.match(/[?&]mid=([^?&]+)/);return!!t&&t[1]})).filter(Boolean);c(e.target.value),p(t)},placeholder:"example: https://kg.qq.com/accompanydetail/index.html?mid=000IsIQC1S3E6A",margin:"normal",helperText:"valid URLs: ".concat(l.length)}),r.a.createElement(m.a,{className:h.a.row,variant:"contained",color:"primary",type:"submit",disabled:g},"Submit"))},d=n(26),g=n.n(d),E=n(33);function b(e){return new Promise((function(t,n){var a=new Image;a.src=e,a.onload=function(){t(a)},a.onerror=function(e){n(e)}}))}function j(e){return new Promise((function(t,n){var a=new FileReader;a.onload=function(){t(a.result)},a.onerror=function(e){n(e)},a.readAsDataURL(e)}))}function w(e){return y.apply(this,arguments)}function y(){return(y=Object(E.a)(g.a.mark((function e(t){var n,a,r,c,o,i,l,u,s,f,m,p;return g.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return s=function(e){var t=i.getImageData(0,e,r,1).data;console.log(t.slice(1380,1400));for(var n=[],a=0;a<r;a++){var c=4*a;(255===t[c]&&85===t[c+1]&&85===t[c+2]||240===t[c]&&80===t[c+1]&&68===t[c+2]||43===t[c]&&43===t[c+1]&&43===t[c+2])&&n.push(a)}function o(e){return t.slice(4*e,4*(e+1))}function l(e,t){return Math.pow(e[0]-t[0],2)+Math.pow(e[1]-t[1],2)+Math.pow(e[2]-t[2],2)}function u(e,t,n){return l(e,t)<l(e,n)}var s=function(){for(var e=n[0],t=[e],a=e-1;a>0&&u(o(a),[19,19,19],o(e));a--)t[0]=a;for(var c,i,l=n[n.length-1],s=0;s<n.length-1;s++)if(n[s]+1!==n[s+1]){var f=(c=n[s],i=n[s+1],Math.floor((c+i)/2));t.push(f)}t.push(l);for(var m=l+1;m<r-1;m++)if(!u(o(m),o(l),[19,19,19])){t[t.length-1]=m-1;break}return console.log(n),console.log(t),t}(),f=s[3]-s[0]-s[2]+s[1];return(s[1]-s[0])/f},u=function(e){var t=null,n=0,a=[];for(var r in e)if(e[n+1]!==e[r]){if(null!==t){var c=Math.floor((n+t)/2);if(a.push(e[c]),3===a.length)break}t=r,n=r}else n=r;return a},l=function(){for(var e=Math.floor(r/2),t=i.getImageData(e,0,1,c).data,n=[],a=0;a<c;a++){var o=4*a;(255===t[o]&&85===t[o+1]&&85===t[o+2]||240===t[o]&&80===t[o+1]&&68===t[o+2]||43===t[o]&&43===t[o+1]&&43===t[o+2])&&n.push(a)}return n},e.next=5,j(t);case 5:return n=e.sent,e.next=8,b(n);case 8:a=e.sent,r=a.naturalWidth,c=a.naturalHeight,(o=document.createElement("canvas")).width=r,o.height=c,(i=o.getContext("2d")).drawImage(a,0,0),f=l(),m=u(f),console.log(m),p=m.map(s),console.log(p);case 20:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function O(){var e=function(){var e=Object(E.a)(g.a.mark((function e(t){return g.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:w(Array.from(t.target.files)[0]);case 2:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();return r.a.createElement("input",{type:"file",multiple:!0,onChange:e})}var k=n(13),L=n(34),R=n.n(L),x=(n(60),["Digit1","Digit2","Digit3","Digit4","Digit5","Digit6"]);var D=function(){var e=Object(a.useRef)(null),t=Object(a.useState)(null),n=Object(u.a)(t,2),c=n[0],o=n[1],i=Object(a.useState)([[],[],[],[],[],[]]),l=Object(u.a)(i,2),s=l[0],f=l[1],m=Object(a.useState)(0),p=Object(u.a)(m,2),h=p[0],v=p[1];Object(a.useEffect)((function(){var t=e.current,n=function(e){if(["KeyD","KeyF"].includes(e.code))t.currentTime+=1*("KeyF"===e.code?1:-1)/24;else{var n=x.findIndex((function(t){return t===e.code}));if(-1!==n){var a=e.shiftKey?R()(s,Object(k.a)({},n,{$splice:[[s[n].length-1,1]]})):R()(s,Object(k.a)({},n,{$push:[t.currentTime]}));f(a)}}};return document.addEventListener("keydown",n),function(){document.removeEventListener("keydown",n)}})),Object(a.useEffect)((function(){var t=e.current,n=function(){v(t.currentTime)};return t.addEventListener("timeupdate",n),function(){t.removeEventListener("timeupdate",n)}}));var d=Object(a.useMemo)((function(){var e=s.reduce((function(e,t){return t.length>e?t.length:e}),0);return Array.from({length:e})}),[s]);return r.a.createElement("div",{className:"App"},r.a.createElement("video",{ref:e,controls:!0,src:c}),e.current&&!!h&&r.a.createElement("div",{className:"video-current-time"},"Current: ",h),r.a.createElement("table",{className:"record-panel"},r.a.createElement("thead",null,r.a.createElement("tr",null,s.map((function(e,t){return r.a.createElement("th",{key:t},t+1)})))),r.a.createElement("tbody",null,d.map((function(e,t){return r.a.createElement("tr",{key:t},x.map((function(e,n){return r.a.createElement("td",{key:n},s[n][t])})))})))),r.a.createElement("footer",null,r.a.createElement("input",{type:"file",accept:"video/*",onChange:function(t){if(t.target.files[0]){URL.revokeObjectURL(c);var n=URL.createObjectURL(t.target.files[0]);o(n),e.current.currentTime=0}}}),r.a.createElement("span",null,"F: \u524d\u8fdb"),r.a.createElement("span",null,"D: \u540e\u9000"),r.a.createElement("span",null,"1~6: \u8bb0\u5f55"),r.a.createElement("span",null,"1~6 + Shift: \u64a4\u9500\u8bb0\u5f55")))};var S=function(){return r.a.createElement(i.a,null,r.a.createElement(l.c,null,r.a.createElement(l.a,{exact:!0,path:"/"},r.a.createElement(O,null)),r.a.createElement(l.a,{path:"/kge"},r.a.createElement(v,null)),r.a.createElement(l.a,{path:"/volume"},r.a.createElement(O,null)),r.a.createElement(l.a,{path:"/player"},r.a.createElement(D,null))))};Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));o.a.render(r.a.createElement(S,null),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()})).catch((function(e){console.error(e.message)}))}},[[49,1,2]]]);
//# sourceMappingURL=main.900f4a0b.chunk.js.map